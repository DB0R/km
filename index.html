<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØºØ°Ø§Ø¦ÙŠ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f4f7f6;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        p.description {
            color: #7f8c8d;
            font-size: 1.1em;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        .action-button {
            background-color: #3498db;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            font-family: 'Cairo', sans-serif;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .action-button:hover {
            background-color: #2980b9;
        }
        .delete-button {
            background-color: #e74c3c;
        }
        .delete-button:hover {
            background-color: #c0392b;
        }
        .save-button {
            background-color: #2ecc71;
        }
        .save-button:hover {
            background-color: #27ae60;
        }
        /* --- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£ÙŠØ§Ù… --- */
        #days-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        /* --- ØªØµÙ…ÙŠÙ… Ù‚Ø³Ù… Ø§Ù„ÙŠÙˆÙ… --- */
        .day-block {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .day-header h2 {
            margin: 0;
            font-size: 1.8em;
            color: #2c3e50;
            flex-grow: 1; /* Ù„Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø£Ø®Ø° Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ØªØ§Ø­Ø© */
            cursor: text;
        }
        .day-header-buttons {
            display: flex;
            gap: 10px;
        }
        .day-header-buttons button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            padding: 5px;
            line-height: 1;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .day-header-buttons button:hover {
            background-color: #f0f0f0;
        }
        .add-meal-btn {
            font-size: 1em !important;
            background-color: #2ecc71 !important;
            color: white;
            padding: 8px 12px !important;
        }
        .add-meal-btn:hover {
            background-color: #27ae60 !important;
        }

        /* --- ØªØµÙ…ÙŠÙ… Ù‚Ø³Ù… Ø§Ù„ÙˆØ¬Ø¨Ø© --- */
        .meals-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }
        .meal-block {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            position: relative;
        }
        .meal-block h3 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
            color: #34495e;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            cursor: text;
        }
        .meal-block .meal-content {
            cursor: text;
            min-height: 40px;
            margin-bottom: 10px;
        }
        .meal-details {
            font-size: 0.9em;
            color: #555;
        }
        .meal-details span {
            display: block;
            margin-top: 5px;
        }
        .meal-details span[contenteditable="true"] {
            display: inline-block;
            min-width: 40px;
            padding: 2px 5px;
            background-color: #e9ecef;
            border-radius: 4px;
            cursor: text;
        }
        .delete-meal-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: none;
            border: none;
            font-size: 1.2em;
            color: #e74c3c;
            cursor: pointer;
            padding: 0;
            opacity: 0.5;
            transition: opacity 0.2s;
        }
        .meal-block:hover .delete-meal-btn {
            opacity: 1;
        }

        /* --- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ --- */
        #login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }
        #login-box {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            width: 90%;
            max-width: 400px;
        }
        #login-box h2 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 25px;
        }
        .login-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: 'Cairo', sans-serif;
            font-size: 1em;
            box-sizing: border-box;
        }
        #login-button {
            width: 100%;
            padding: 12px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
        }
        #login-error {
            color: #e74c3c;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>

    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="login-overlay">
        <div id="login-box">
            <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø­Ø±Ø±</h2>
            <form id="login-form">
                <input type="text" id="username-input" class="login-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" required>
                <input type="password" id="password-input" class="login-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                <button type="submit" id="login-button">Ø¯Ø®ÙˆÙ„</button>
                <p id="login-error">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.</p>
            </form>
        </div>
    </div>

    <div class="container" id="diet-plan-container" style="display: none;"> <!-- Ù…Ø®ÙÙŠ Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ -->
        <header>
            <h1>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØºØ°Ø§Ø¦ÙŠ</h1>
            <p class="description">Ù‚Ù… Ø¨Ø¨Ù†Ø§Ø¡ Ø®Ø·ØªÙƒ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ÙŠØ§Ù… ÙˆØ§Ù„ÙˆØ¬Ø¨Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ.</p>
        </header>

        <!-- Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·Ø© -->
        <div style="text-align: center; margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 25px;">
            <label for="plan-type-selector" style="font-size: 1.2em; color: #16a085; display: block; margin-bottom: 10px;">ğŸ“‹ Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·Ø©:</label>
            <select id="plan-type-selector" style="font-family: 'Cairo', sans-serif; font-size: 1.1em; padding: 10px; border-radius: 5px; border: 1px solid #16a085; min-width: 300px; cursor: pointer; background-color: white; font-weight: bold;">
                <option value="diet">Ù†Ø¸Ø§Ù… ØºØ°Ø§Ø¦ÙŠ</option>
                <option value="workout">Ù†Ø¸Ø§Ù… ØªØ¯Ø±ÙŠØ¨ÙŠ</option>
            </select>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© (ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØºØ°Ø§Ø¦ÙŠ) -->
        <div id="nutrition-fields-container" style="text-align: center; margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 25px; display: none;">
            <label style="font-size: 1.2em; color: #16a085; display: block; margin-bottom: 15px;">ğŸ¥‘ Ø§Ø®ØªØ± Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ù„Ù„ÙˆØ¬Ø¨Ø§Øª:</label>
            <div id="nutrition-fields-checkboxes" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 15px;">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ù‡Ù†Ø§ Ø¹Ø¨Ø± Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 25px; flex-wrap: wrap;">
            <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³Ù…Ø© -->
            <div>
                <label for="theme-selector" style="font-size: 1.2em; color: #2c3e50; display: block; margin-bottom: 10px;">ğŸ¨ Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„ØªØµÙ…ÙŠÙ…:</label>
                <select id="theme-selector" style="font-family: 'Cairo', sans-serif; font-size: 1.1em; padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 250px; cursor: pointer; background-color: white;">
                    <option value="default-light">Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø£Ø²Ø±Ù‚)</option>
                    <option value="ocean-blue">Ù†Ø³ÙŠÙ… Ø§Ù„Ù…Ø­ÙŠØ· (Ø£Ø²Ø±Ù‚)</option>
                    <option value="forest-green">Ù‡Ø¯ÙˆØ¡ Ø§Ù„ØºØ§Ø¨Ø© (Ø£Ø®Ø¶Ø±)</option>
                    <option value="royal-gold">Ø§Ù„Ù„Ù…Ø³Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© (Ø°Ù‡Ø¨ÙŠ)</option>
                    <option value="professional-gray">Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ (Ø±Ù…Ø§Ø¯ÙŠ)</option>
                    <option value="sunset-orange">ØºØ±ÙˆØ¨ Ø§Ù„Ø´Ù…Ø³ (Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ)</option>
                    <option value="royal-purple">Ù…Ù„ÙƒÙŠ (Ø¨Ù†ÙØ³Ø¬ÙŠ)</option>
                </select>
            </div>
            <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ -->
            <div>
                <label style="font-size: 1.2em; color: #2c3e50; display: block; margin-bottom: 10px;">â˜€ï¸ Ø§Ø®ØªØ± Ø§Ù„ÙˆØ¶Ø¹:</label>
                <button id="mode-toggle-btn" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹" style="font-family: 'Cairo', sans-serif; font-size: 1.1em; padding: 10px 20px; border-radius: 5px; border: 1px solid #ddd; cursor: pointer; background-color: white;">Ù†Ù‡Ø§Ø±ÙŠ â˜€ï¸</button>
            </div>
        </div>

        <!-- Ø§Ø®ØªÙŠØ§Ø± ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ -->
        <div style="text-align: center; margin-bottom: 25px;">
            <label for="signature-layout-selector" style="font-size: 1.2em; color: #2c3e50; display: block; margin-bottom: 10px;">âœï¸ Ø§Ø®ØªØ± ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:</label>
            <select id="signature-layout-selector" style="font-family: 'Cairo', sans-serif; font-size: 1.1em; padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 250px; cursor: pointer; background-color: white;">
                <option value="professional">Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ (Ø¯Ø§Ø¦Ø±ÙŠ)</option>
                <option value="classic">Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ (Ù…Ø±Ø¨Ø¹)</option>
                <option value="modern">Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ø¯ÙŠØ« (Ø¨Ø·Ø§Ù‚Ø©)</option>
            </select>
        </div>

        <!-- Ø§Ø®ØªÙŠØ§Ø± ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
        <div style="text-align: center; margin-bottom: 25px;">
            <label for="mobile-layout-selector" style="font-size: 1.2em; color: #2c3e50; display: block; margin-bottom: 10px;">ğŸ“± Ø§Ø®ØªØ± Ù‡ÙŠÙƒÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„:</label>
            <select id="mobile-layout-selector" style="font-family: 'Cairo', sans-serif; font-size: 1.1em; padding: 10px; border-radius: 5px; border: 1px solid #ddd; min-width: 250px; cursor: pointer; background-color: white;">
                <option value="mobile-vertical">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ© (Ø§ÙØªØ±Ø§Ø¶ÙŠ)</option>
                <option value="mobile-grid">Ø´Ø¨ÙƒØ© Ù…Ø¯Ù…Ø¬Ø© (Ø¹Ù…ÙˆØ¯ÙŠÙ†)</option>
                <option value="mobile-cards">Ø¨Ø·Ø§Ù‚Ø§Øª Ù…Ø¨Ø³Ø·Ø©</option>
            </select>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„Ø­Ø°Ù -->
        <div class="action-buttons">
            <button class="action-button" id="add-day-button">â• Ø¥Ø¶Ø§ÙØ© ÙŠÙˆÙ…</button>
            <button class="action-button" id="load-plan-button" style="background-color: #f39c12;">ğŸ“‚ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø®Ø·Ø©</button>
            <button class="action-button save-button" id="save-button">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø®Ø·Ø©</button>
            <button class="action-button delete-button" id="delete-all-button">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
        </div>

        <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© -->
        <div id="days-container">
            <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø£ÙŠØ§Ù… Ù‡Ù†Ø§ Ø¹Ø¨Ø± Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
        </div>

        <!-- Ø­Ù‚Ù„ Ù…Ø®ÙÙŠ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù -->
        <input type="file" id="plan-file-input" accept=".html" style="display: none;">
    </div>

    <script>
        // --- Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¯Ù…Ø¬ ÙˆØ§Ù„Ù…Ø­Ù…ÙŠ ---

        // Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¨Ø²Ø± Ø§Ù„Ù…Ø§ÙˆØ³ Ø§Ù„Ø£ÙŠÙ…Ù† ÙˆØ­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©
        document.addEventListener('contextmenu', event => event.preventDefault());
        // Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¬Ø¹Ù„ Ù…Ù† Ø§Ù„ØµØ¹Ø¨ ÙØªØ­ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·ÙˆØ±ØŒ Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ† ØªØ¬Ø§ÙˆØ²Ù‡
        // (ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ø¹Ù†Ù‡ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª ØªÙØ¹ÙŠÙ„Ù‡)
        /*
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C'))) {
                e.preventDefault();
            }
        });
        */

        // Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠ Ù‡Ùˆ Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù script.js Ù…Ø¯Ù…Ø¬ Ù‡Ù†Ø§
        // --- Ø¨Ø¯Ø§ÙŠØ© Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
        const loginOverlay = document.getElementById('login-overlay');
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error');
        const mainContainer = document.getElementById('diet-plan-container');

        // Ø¯Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ØµÙ…Ø© (hash) Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±
        const simpleHash = str => {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = (hash << 5) - hash + char;
                hash |= 0; // Convert to 32bit integer
            }
            return hash.toString();
        };

        // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªØ­Ù‚Ù‚
        const checkLogin = async () => {
            try {
                const response = await fetch('botta11.txt', { cache: 'no-store' });
                if (!response.ok) throw new Error('Cannot find botta11.txt');
                
                const text = await response.text();
                const lines = text.split('\n');
                let correctUser = '';
                let correctPass = '';

                lines.forEach(line => {
                    if (line.startsWith('username=')) correctUser = line.split('=')[1].trim();
                    if (line.startsWith('password=')) correctPass = line.split('=')[1].trim();
                });

                if (!correctUser || !correctPass) throw new Error('Invalid botta11.txt format');

                const correctPassHash = simpleHash(correctPass);
                const storedPassHash = localStorage.getItem('passwordHash');

                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ØµÙ…Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨ØµÙ…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŒ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©
                if (storedPassHash === correctPassHash) {
                    showApp();
                } else {
                    // Ø¥Ø°Ø§ Ù„Ù… ØªØªØ·Ø§Ø¨Ù‚ØŒ Ø§Ø¸Ù‡Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù†ØªØ¸Ø± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
                    loginOverlay.style.display = 'flex';
                    mainContainer.style.display = 'none';
                    setupLoginForm(correctUser, correctPass, correctPassHash);
                }

            } catch (error) {
                // ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„ÙØŒ Ø§Ø¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ø¯Ø§Ø¦Ù…Ø©
                console.error("Login Error:", error);
                loginError.textContent = "Ø®Ø·Ø£ ÙØ§Ø¯Ø­: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (botta11.txt).";
                loginError.style.display = 'block';
                document.getElementById('login-button').disabled = true;
            }
        };

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ø³ØªÙ…Ø§Ø±Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        const setupLoginForm = (correctUser, correctPass, correctPassHash) => {
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const enteredUser = document.getElementById('username-input').value;
                const enteredPass = document.getElementById('password-input').value;

                if (enteredUser === correctUser && enteredPass === correctPass) {
                    // Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­ØŒ Ø§Ø­ÙØ¸ Ø§Ù„Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    localStorage.setItem('passwordHash', correctPassHash);
                    showApp();
                } else {
                    loginError.style.display = 'block';
                }
            });
        };

        // Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
        const showApp = () => {
            loginOverlay.style.opacity = '0';
            setTimeout(() => {
                loginOverlay.style.display = 'none';
            }, 500); // Ø§Ù†ØªØ¸Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ£Ø«ÙŠØ±
            mainContainer.style.display = 'block';
        };

        // Ø§Ø¨Ø¯Ø£ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        checkLogin();

        // --- Ù†Ù‡Ø§ÙŠØ© Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---


        document.addEventListener('DOMContentLoaded', () => {
            const addDayButton = document.getElementById('add-day-button');
            const deleteAllButton = document.getElementById('delete-all-button');
            const saveButton = document.getElementById('save-button');
            const loadPlanButton = document.getElementById('load-plan-button');
            const planFileInput = document.getElementById('plan-file-input');
            const modeToggleButton = document.getElementById('mode-toggle-btn');
            const planTypeSelector = document.getElementById('plan-type-selector');
            const daysContainer = document.getElementById('days-container');
            let dayCounter = 0;

            // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©
            const nutritionFields = {
                calories: { label: 'Ø³Ø¹Ø±Ø§Øª', unit: '' },
                protein: { label: 'Ø¨Ø±ÙˆØªÙŠÙ†', unit: 'Ø¬Ø±Ø§Ù…' },
                carbs: { label: 'ÙƒØ§Ø±Ø¨', unit: 'Ø¬Ø±Ø§Ù…' },
                fats: { label: 'Ø¯Ù‡ÙˆÙ†', unit: 'Ø¬Ø±Ø§Ù…' },
                fiber: { label: 'Ø£Ù„ÙŠØ§Ù', unit: 'Ø¬Ø±Ø§Ù…' },
                sugar: { label: 'Ø³ÙƒØ±ÙŠØ§Øª', unit: 'Ø¬Ø±Ø§Ù…' }
            };


            /**
             * Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø³Ù… ÙˆØ¬Ø¨Ø© Ø¬Ø¯ÙŠØ¯.
             */
            const createMealBlock = () => {
                const planType = planTypeSelector.value;
                const mealBlock = document.createElement('div');
                mealBlock.className = 'meal-block';

                const title = planType === 'diet' ? 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ¬Ø¨Ø©' : 'Ø§Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†';
                const content = planType === 'diet' ? 'Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ¬Ø¨Ø©...' : 'Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªÙ…Ø±ÙŠÙ†...';
                let detailsHtml = '';

                if (planType === 'diet') {
                    document.querySelectorAll('#nutrition-fields-checkboxes input:checked').forEach(checkbox => {
                        const fieldKey = checkbox.dataset.field;
                        const field = nutritionFields[fieldKey];
                        detailsHtml += `<span data-field="${fieldKey}"><strong>${field.label}:</strong> <span contenteditable="true">0</span> ${field.unit}</span>`;
                    });
                } else { // workout
                    detailsHtml = `
                        <span class="workout-field"><strong>Ø§Ù„ÙˆØ²Ù†:</strong> <span contenteditable="true">0</span> ÙƒØ¬Ù…</span>
                        <span class="workout-field"><strong>Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª:</strong> <span contenteditable="true">0</span></span>
                        <span class="workout-field"><strong>Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹:</strong> <span contenteditable="true">0</span></span>
                    `;
                }

                mealBlock.innerHTML = `
                    <button class="delete-meal-btn" title="Ø­Ø°Ù Ø§Ù„ÙˆØ¬Ø¨Ø©">ğŸ—‘ï¸</button>
                    <h3 contenteditable="true">${title}</h3>
                    <div class="meal-content" contenteditable="true">${content}</div>
                    <div class="meal-details">${detailsHtml}</div>
                `;
                return mealBlock;
            };

            /**
             * Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø³Ù… ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯.
             */
            const createDayBlock = () => {
                dayCounter++;
                const dayBlock = document.createElement('div');
                const addBtnText = planTypeSelector.value === 'diet' ? 'â• Ø¥Ø¶Ø§ÙØ© ÙˆØ¬Ø¨Ø©' : 'â• Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ†';
                dayBlock.className = 'day-block';
                dayBlock.innerHTML = `
                    <div class="day-header">
                        <h2 contenteditable="true">Ø§Ù„ÙŠÙˆÙ… ${dayCounter}</h2>
                        <div class="day-header-buttons">
                            <button class="add-meal-btn">${addBtnText}</button>
                            <button class="delete-day-btn" title="Ø­Ø°Ù Ø§Ù„ÙŠÙˆÙ…">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div class="meals-container">
                        <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ù‡Ù†Ø§ -->
                    </div>
                `;
                return dayBlock;
            };

            /**
             * Ø¥Ø¶Ø§ÙØ© ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©.
             */
            const addDay = () => {
                const newDay = createDayBlock();
                daysContainer.appendChild(newDay);
            };

            /**
             * Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙŠØ§Ù… Ù…Ù† Ø§Ù„ØµÙØ­Ø©.
             */
            const deleteAllDays = () => {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.')) {
                    daysContainer.innerHTML = '';
                    dayCounter = 0; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø¯Ø§Ø¯
                }
            };

            /**
             * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ ÙˆØ§Ù„Ù„ÙŠÙ„ÙŠ.
             */
            const toggleMode = () => {
                const isDarkMode = modeToggleButton.dataset.mode === 'dark';
                if (isDarkMode) {
                    modeToggleButton.dataset.mode = 'light';
                    modeToggleButton.innerHTML = 'Ù†Ù‡Ø§Ø±ÙŠ â˜€ï¸';
                } else {
                    modeToggleButton.dataset.mode = 'dark';
                    modeToggleButton.innerHTML = 'Ù„ÙŠÙ„ÙŠ ğŸŒ™';
                }
            };

            /**
             * ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±.
             */
            const updateUIForPlanType = () => {
                const planType = planTypeSelector.value;
                const mainHeader = document.querySelector('header h1');
                const mainDescription = document.querySelector('header p.description');
                const addDayBtn = document.getElementById('add-day-button');
                const nutritionFieldsContainer = document.getElementById('nutrition-fields-container');

                if (planType === 'workout') {
                    mainHeader.textContent = 'Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ';
                    mainDescription.textContent = 'Ù‚Ù… Ø¨Ø¨Ù†Ø§Ø¡ Ø®Ø·ØªÙƒ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ù„ÙƒÙ„ ÙŠÙˆÙ….';
                    addDayBtn.textContent = 'â• Ø¥Ø¶Ø§ÙØ© ÙŠÙˆÙ… ØªØ¯Ø±ÙŠØ¨ÙŠ';
                    nutritionFieldsContainer.style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØºØ°ÙŠØ©
                } else { // diet
                    mainHeader.textContent = 'Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØºØ°Ø§Ø¦ÙŠ';
                    mainDescription.textContent = 'Ù‚Ù… Ø¨Ø¨Ù†Ø§Ø¡ Ø®Ø·ØªÙƒ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ÙŠØ§Ù… ÙˆØ§Ù„ÙˆØ¬Ø¨Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ.';
                    addDayBtn.textContent = 'â• Ø¥Ø¶Ø§ÙØ© ÙŠÙˆÙ…';
                    nutritionFieldsContainer.style.display = 'block'; // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØºØ°ÙŠØ©
                }

                // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„ØµÙØ­Ø©
                document.querySelectorAll('.day-block').forEach(dayBlock => {
                    const addMealBtn = dayBlock.querySelector('.add-meal-btn');
                    if (addMealBtn) {
                        addMealBtn.textContent = planType === 'diet' ? 'â• Ø¥Ø¶Ø§ÙØ© ÙˆØ¬Ø¨Ø©' : 'â• Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ†';
                    }

                    dayBlock.querySelectorAll('.meal-block').forEach(mealBlock => {
                        const details = mealBlock.querySelector('.meal-details');
                        let newDetailsHtml = '';
                        if (planType === 'diet') {
                            // Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                            document.querySelectorAll('#nutrition-fields-checkboxes input:checked').forEach(checkbox => {
                                const fieldKey = checkbox.dataset.field;
                                const field = nutritionFields[fieldKey];
                                newDetailsHtml += `<span data-field="${fieldKey}"><strong>${field.label}:</strong> <span contenteditable="true">0</span> ${field.unit}</span>`;
                            });
                        } else { // workout
                            newDetailsHtml = `
                                <span class="workout-field"><strong>Ø§Ù„ÙˆØ²Ù†:</strong> <span contenteditable="true">0</span> ÙƒØ¬Ù…</span>
                                <span class="workout-field"><strong>Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª:</strong> <span contenteditable="true">0</span></span>
                                <span class="workout-field"><strong>Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹:</strong> <span contenteditable="true">0</span></span>
                            `;
                        }
                        details.innerHTML = newDetailsHtml;
                    });
                });
            };

            /**
             * ÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©.
         */
            const populateNutritionFields = () => {
                const container = document.getElementById('nutrition-fields-checkboxes');
                container.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø¯ÙŠÙ…

                // Ø­Ù‚ÙˆÙ„ Ù…ÙØ¹Ù„Ø© Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ
                const defaultFields = ['calories', 'protein'];

                for (const key in nutritionFields) {
                    const field = nutritionFields[key];
                    const isChecked = defaultFields.includes(key);
                    const checkboxHtml = `
                        <label style="display: inline-flex; align-items: center; gap: 5px; font-size: 1em; cursor: pointer; padding: 5px 10px; border-radius: 5px; background-color: #f0f0f0;">
                            <input type="checkbox" data-field="${key}" ${isChecked ? 'checked' : ''}>
                            ${field.label}
                        </label>
                    `;
                    container.innerHTML += checkboxHtml;
                }

                // Ø±Ø¨Ø· Ø­Ø¯Ø« Ø§Ù„ØªØºÙŠÙŠØ± Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
                container.addEventListener('change', updateUIForPlanType);
            };

            // ... (Ø¨Ù‚ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª Ù…Ù† Ù…Ù„Ù script.js)
            // ... (getThemeStyles, imageUrlToBase64, savePlanAsHtml, loadPlanFromFile)
            // ... (ÙˆØ±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«)

            // Ø§Ù„ØµÙ‚ Ù‡Ù†Ø§ ÙƒÙ„ Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù script.js Ù…Ù† Ø¨Ø¹Ø¯ Ø¯Ø§Ù„Ø© populateNutritionFields ÙˆØ­ØªÙ‰ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©

        });
        // --- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¯Ù…Ø¬ ---
    </script>
    
</body>
</html>

